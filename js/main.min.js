$(".form-group input").each(function(index, el) {
    InputIsFilled($(el))
});

$(".form-group textarea").each(function(index, el) {
    InputIsFilled($(el))
});


$(".form-group select").each(function(index, el) {
    InputIsFilled($(el))
});

$(".form-group input").change(function() {
    InputIsFilled($(this))
})

$(".form-group textarea").change(function() {
    InputIsFilled($(this))
})

$(".form-group select").change(function() {
    InputIsFilled($(this))
})


function InputIsFilled(el) {
    if ($(el).val()) {
        $(el).addClass("input-active")
    } else {
        $(el).removeClass("input-active")
    }
}


$(".tab").click(function () {
    let parentBlock = $(this).parents(".tabs-parent")
    let tabId = $(this).attr("data-tab")
    console.log(parentBlock)
    $(parentBlock).find(".tab").removeClass("_active")
    $(this).addClass("_active")
    $(parentBlock).find(".tab-content").removeClass("_active")
    $(parentBlock).find(`.tab-${tabId}`).addClass("_active")
})


$(".rating__item").click(function() {
    let ratingItem = parseInt($(this).attr("data-rating-value"))
    $(this).parent(".rating").attr("data-total-rating", ratingItem)
})

$(".header__lk").hover(onIn, onOut);
$(".nav__item").hover(onIn, onOut);

function onIn() {
    if (window.innerWidth > 992) {
        let el = $(this)
        setTimeout(function() {
            if (el.is(':hover')) {
                el.addClass("_active")
            }
        }, 200);
    }
}

function onOut() {
    if (window.innerWidth > 992) {
        $(this).removeClass("_active")
    }
}


if (window.innerWidth <= 992){
    $(".header__lk-show").click(function () {
        $(".header__lk-hidden").fadeToggle()
    })


    $(document).mouseup(function(e) {
        var div = $('.header__lk');
        if (!div.is(e.target) && div.has(e.target).length === 0) {
            $(".header__lk-hidden").fadeOut()
        }
    });
}

fixHeader()
$(window).scroll(function() {
    fixHeader()
})

function fixHeader() {
    if ($(window).scrollTop() > 50) {
        $(".header--index").addClass("header--fix")
    } else {
        $(".header--index").removeClass("header--fix")
    }
}

function advantageSlider() {
    var swiper = new Swiper('.advantages .swiper-container', {
        slidesPerView: "auto",
        spaceBetween: 29,
        navigation: {
            nextEl: '.advantages .swiper-button-next',
            prevEl: '.advantages .swiper-button-prev',
        },
        breakpoints:{
            320:{
                slidesPerView: "auto",
            },
            1200:{
                slidesPerView: 4,
            },
        }
    })
}

function companiesSlider() {
    var swiper = new Swiper('.companies .swiper-container', {
        slidesPerView: "auto",
        spaceBetween: 51,
    })
}

function historySlider() {
    var swiper2 = new Swiper(".history__content .swiper-container", {
        spaceBetween: 1000,
        allowTouchMove: false,
        thumbs: {
            swiper: swiper,
        },
    });
    var swiper = new Swiper('.history__slider .swiper-container', {
        slidesPerView: 1,
        spaceBetween: 40,
        // slideToClickedSlide: true,
        watchSlidesProgress: true,
        on: {
            slideChangeTransitionEnd: function () {
                let num = +$(".history__slider .swiper-slide-active").attr("aria-label").slice(0, -3)
                swiper2.slideTo(num-1)
            },
        },
        breakpoints:{
            320:{
                spaceBetween: 13,
            },
            992:{
                spaceBetween: 40,
            },
        }
    })

    $(".history__slider .swiper-slide").click(function () {
        let num = +$(this).attr("aria-label").slice(0, -3)
        setActiveSlide(num)
    })

    function setActiveSlide(num) {
        swiper.slideTo(num-1)
        swiper2.slideTo(num-1)
    }
}

function workersSlider() {
    var swiper = new Swiper('.workers .swiper-container', {
        slidesPerView: "auto",
        spaceBetween: 24,
        breakpoints:{
            320:{
                slidesPerView: "auto",
            },
            1200:{
                slidesPerView: 4,
            },
        }
    })
}

function vacancySlider() {
    var swiper = new Swiper('.vacancy-collection .swiper-container', {
        slidesPerView: "auto",
        spaceBetween: 29,
        breakpoints:{
            320:{
                slidesPerView: "auto",
            },
            1200:{
                slidesPerView: 3,
            },
        }
    })
}

function aboutSlider() {
    var swiper = new Swiper('.about-gallery .swiper-container', {
        slidesPerView: 1,
        spaceBetween: 20,
        pagination: {
            el: '.about-gallery .swiper-pagination',
            type: 'fraction',
        },
    })
}


function gallerySlider() {
    var swiper = new Swiper('.catalog-gallery .swiper-container', {
        slidesPerView: 1,
        spaceBetween: 20,
        pagination: {
            el: '.catalog-gallery .swiper-pagination',
            type: 'fraction',
        },
    })
}

function reviewsSlider() {
    var swiper = new Swiper('.review__items .swiper-container', {
        slidesPerView: "auto",
        spaceBetween: 22,
    })
}

function whoSlider() {
    var swiper = new Swiper('.for-who .swiper-container', {
        slidesPerView: "auto",
        spaceBetween: 34,
        navigation: {
            nextEl: '.for-who .swiper-button-next',
            prevEl: '.for-who .swiper-button-prev',
        },
        breakpoints:{
            320:{
                slidesPerView: "auto",
                spaceBetween: 22,
            },
            1200:{
                slidesPerView: 3,
                spaceBetween: 34,
            },
        }
    })
}

function howSlider() {
    var swiper = new Swiper('.how .swiper-container', {
        slidesPerView: "auto",
        spaceBetween: 30,
        breakpoints:{
            320:{
                slidesPerView: "auto",
            },
            1200:{
                slidesPerView: 4,
            },
        }
    })
}

advantageSlider()
companiesSlider()
historySlider()
workersSlider()
vacancySlider()
aboutSlider()
gallerySlider()
reviewsSlider()
whoSlider()
howSlider()

$(".apart-card__toggle").click(function () {
    $(this).parents(".apart-card").toggleClass("_open")
    $(this).parents(".apart-card").find(".apart-card__hidden").slideToggle()
})

$(".search-detail__toggle").click(function () {
    $(".search-detail__hidden").slideToggle()
    $(".search-detail").toggleClass("_open")
})


$(".catalog .main__btn").click(function (e) {
    e.preventDefault()
    let comeTopApart = $("#comeTopApart")
    let leaveFromApart = $("#leaveFromApart")
    let personInRoom = $("#personInRoom")

    let comeTopApartIsValid = checkInputFilled($(comeTopApart))
    let leaveFromApartIsValid = checkInputFilled($(leaveFromApart))
    let personInRoomIsValid = checkInputFilled($(personInRoom))

    if(comeTopApartIsValid && leaveFromApartIsValid && personInRoomIsValid){
        $(".catalog__type").slideDown()
        $(".catalog__content").show()
    }
})


function checkInputFilled(input) {
    if($(input).val() !== ""){
        setInputStatus($(input),true)
        return true
    } else{
        setInputStatus($(input),false)
        return false
    }
}

function setInputStatus(input,isValid) {
    if(isValid){
        $(input).removeClass("input--error")
    }else {
        $(input).addClass("input--error")
    }
}


$(".catalog__radio input").change(function () {
    $(".catalog__detail").slideDown()
})


$(".catalog-gallery__open").click(function () {
    let galleryImg = document.querySelector(".catalog-gallery .swiper-slide:nth-child(1) .catalog-gallery__img")
    console.log(galleryImg)
    galleryImg.click()
})

let reviewCutCount = 3
if(window.innerWidth > 992){
    reviewCutCount = 3
} else{
    reviewCutCount = 6
}


setCutReview()

$(window).resize(function () {
    if(window.innerWidth > 992){
        reviewCutCount = 3
    } else{
        reviewCutCount = 6
    }
    setCutReview()
})

function getReviewTextHeight(){
    let letterHeight = $(".review-card__desc").css("lineHeight").slice(0, -2)
    return +letterHeight * reviewCutCount
}

function cutReviewText(el){
    $(el).css("-webkit-line-clamp",`${reviewCutCount}`)
}


$(".review-card__all").click(function () {
    if($(this).parents(".review-card").hasClass("_show")){
        $(this).parents(".review-card").removeClass("_show")
    } else{
        $(this).parents(".review-card").addClass("_show")
    }
})


function setCutReview() {
    $(".review-card__desc").each(function (index, el){
        let textHeight = $(el).height()
        if(textHeight > getReviewTextHeight()){
            cutReviewText($(el))
            $(el).parents(".review-card").addClass("_cut")
        } else{
            $(el).css("-webkit-line-clamp","unset")
            $(el).parents(".review-card").removeClass("_cut")
        }
    });
}


$(".review-form .rating__item").click(function () {
    let ratingItem = parseInt($(this).attr("data-rating-value"))
    console.log(ratingItem)

    $(this).parents(".review-form__item").find(".review-form__item-num").html(`${ratingItem}.0`)
})

$(".achieve").click(function () {
    $(this).toggleClass("_active")
})


$(document).mouseup(function(e) {
    var div = $('.achieve');
    if (!div.is(e.target) && div.has(e.target).length === 0) {
        $(".achieve").removeClass("_active")
    }
});

$("[data-modal]").click(function () {
    let modalId = $(this).attr("data-modal")

    openModal(modalId)
})

function openModal(modalId){
    $(`#${modalId}`).addClass("modal--active")
    $("body").addClass("fixed-body")
}

$(".modal").click(function () {
    closeModal()
})

$(".modal__close").click(function () {
    closeModal()
})

$(".modal__dialog").click(function (e) {
    e.stopPropagation()
})


function closeModal() {
    $('.modal').removeClass("modal--active")
    $("body").removeClass("fixed-body")
}

function showHelpModal(data) {
    let desc = ``
    console.log(data.desc)

    for(let i = 0; i<data.desc.length; i++){
        // console.log(data.desc[i])
        desc = `
            ${desc} 
            <p>${data.desc[i]}</p>
        `
    }

    $(".help-modal__title").html(data.title)
    $(".help-modal__desc").html(desc)
    $(".help-modal__img img").attr("src",`img/${data.img}.svg`)

    openModal('helpModal')
}


//# sourceMappingURL=../sourcemaps/main.min.js.map
